<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Easy KIOSK</title>
    <link rel="stylesheet" href="css/restaurant_kio.css">
    <script>

        // ìƒë‹¨ ë©”ë‰´ í´ë¦­ì‹œ ë©”ë‰´ ì „í™˜
        function showTab(tabName) {
            const tabs = document.querySelectorAll('.menu-grid');
            tabs.forEach(tab => tab.classList.add('hidden'));
            document.getElementById(tabName).classList.remove('hidden');

            const tabButtons = document.querySelectorAll('.tab');
            tabButtons.forEach(button => button.classList.remove('active'));
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
        }
        
        // íƒ€ì´ë¨¸ ì„¤ì • 
        let time = 120; 
        function startTimer() {
            const timerElement = document.querySelector('.timer .time');
            const interval = setInterval(() => {
                if (time > 0) {
                    time--;
                    timerElement.textContent = `${time}ì´ˆ`;
                } else {
                    clearInterval(interval); 
                }
            }, 1000); 
        }
        window.onload = startTimer;

        
        
        // ì£¼ë¬¸ë‚´ì—­     
        const cartItems = []; // ì£¼ë¬¸ ë‚´ì—­ ì €ì¥

        function addToCart(name, price) {
            const cartList = document.getElementById('cart-items');

            // ì´ë¯¸ ë‹´ì€ ìƒí’ˆì¸ì§€ í™•ì¸
            const existingItem = cartItems.find(item => item.name === name);
            if (existingItem) {
                existingItem.quantity++;
                updateCart();
                return;
            }

            // ìƒˆë¡œìš´ ìƒí’ˆ ì¶”ê°€
            const newItem = { name, price, quantity: 1 };
            cartItems.push(newItem);
            updateCart();
        }

        // ë‹´ì€ ìƒí’ˆ ëª©ë¡ ì—…ë°ì´íŠ¸
        function updateCart() {
            const cartList = document.getElementById('cart-items');
            cartList.innerHTML = ''; // ê¸°ì¡´ ë‚´ìš© ì´ˆê¸°í™”

            cartItems.forEach((item, index) => {
                const cartItem = document.createElement('li');
                cartItem.className = 'cart-item';

                cartItem.innerHTML = `
                    <button class="remove-btn" onclick="removeItem(${index})">X</button>
                    <span class="item-name">${item.name}</span>
                    <div class="item-controls">
                        <button onclick="decreaseQuantity(${index})">-</button>
                        <span>${item.quantity}ê°œ</span>
                        <button onclick="increaseQuantity(${index})">+</button>
                        <span>${item.price * item.quantity}ì›</span>
                    </div>
                `;

                cartList.appendChild(cartItem);
            });
            calculateTotal(); // ì´ ê¸ˆì•¡ ì—…ë°ì´íŠ¸
        }
        
        // ìˆ˜ëŸ‰ ì¦ê°€ 
        function increaseQuantity(index) {
            cartItems[index].quantity++;
            updateCart();
        }

        // ìˆ˜ëŸ‰ ê°ì†Œ
        function decreaseQuantity(index) {
            if (cartItems[index].quantity > 1) {
                cartItems[index].quantity--;
            } else {
                removeItem(index);
            }
            updateCart();
        }
        

        // í•´ë‹¹ ìƒí’ˆ ì‚­ì œ
        function removeItem(index) {
            cartItems.splice(index, 1); 
            updateCart();
        }

        // ì´ ê¸ˆì•¡ ê³„ì‚°
        function calculateTotal() {
            const total = cartItems.reduce((sum, item) => sum + item.price * item.quantity, 0); // ì´ ê¸ˆì•¡ ê³„ì‚°
            const payButton = document.querySelector('.btn.pay');
            payButton.textContent = `${total}ì› ê²°ì œí•˜ê¸°`; // ë²„íŠ¼ì— ì´ ê¸ˆì•¡ í‘œì‹œ
        }

        //  ìƒí’ˆ ëª©ë¡ ì „ì²´ ì‚­ì œ
        function clearCart() {
            cartItems.length = 0;
            updateCart();
        }
        
    </script>
    <style>

        /* ê²°ì œí•˜ê¸° ëª¨ë‹¬ ì°½ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); 
            display: none; 
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal {
            background-color: white;
            border-radius: 10px;
            width: 600px; 
            height: 600px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: space-between; 
        }

        .modal-header {
            color: #f0f0f0;
            background-color: #FF6347;
            padding: 10px;
            border-radius: 10px 10px 0 0;
            font-size: 20px;
            font-weight: bold;
        }

        /* ëª¨ë‹¬ ë‚´ë¶€ì— ê³µë°± ì¶”ê°€ */
        .modal-main {
            height: 100vh;
            margin: 20px;
        }

        .modal h2 {
            margin: 20px 0 10px;
            font-size: 18px;
        }

        .order-table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
        }

        .order-table th, .order-table td {
            
            padding: 8px;
            text-align: center;
        }

        .order-table th {
            background-color: #f0f0f0;
            font-weight: bold;
        }

        .summary {
            margin-top: 10px;
            text-align: left;
            font-size: 14px;
        }

        .summary div {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
        }

        .summary div span {
            font-weight: bold;
        }

        .modal-buttons {
            display: flex;
            justify-content: space-around;
            padding: 20px;
            border-top: 1px solid #ddd;
        }

        .modal-buttons .btn {
            padding: 10px 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
        }


        /* ê²°ì œ ë°©ë²• ì„ íƒ ëª¨ë‹¬ ì°½*/
        .payment-modal {
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            width: 600px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 600px;
        }

        .payment-modal-header {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .payment-total {
            background-color: #FF6347;
            color: white;
            padding: 10px;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .payment-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .payment-option {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .payment-option:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }

        .payment-option img {
            width: 50px;
            height: 50px;
            margin-bottom: 10px;
        }

        .payment-option span {
            font-size: 14px;
            font-weight: bold;
        }

        .pay1{
            background: url("img/ê²°ì œ/ì‹ ìš©ì¹´ë“œ.png");
            background-size: cover;;

        }

    </style>
</head>
<body>
    
    <header>
        <div class="header">
            <div class="icon">ğŸ </div>
            <h1>ìŒì‹ì  í‚¤ì˜¤ìŠ¤í¬</h1>
            <div class="icon">+</div>
        </div>

        <div class="tabs">
            <div class="tab active" data-tab="season-menu" onclick="showTab('season-menu')">ë©”ë‰´1</div>
            <div class="tab" data-tab="coffee-hot" onclick="showTab('coffee-hot')">ë©”ë‰´2</div>
            <div class="tab" data-tab="coffee-ice" onclick="showTab('coffee-ice')">ë©”ë‰´3</div>
        </div>
    </header>    


    <main>
        <!-- ë©”ë‰´1 -->
        <div class="menu-grid" id="season-menu">
            <div class="menu-item" onclick="addToCart('ëœì¥ì°Œê°œ', 4000)">
                <img src="img/ëœì¥ì°Œê°œ.jpg" alt="ëœì¥ì°Œê°œ">
                <div class="name">ëœì¥ì°Œê°œ</div>
                <div class="price">4000ì›</div>
            </div>
            <div class="menu-item" onclick="addToCart('ì œìœ¡', 4800)">
                <img src="img/ì œìœ¡.jpg" alt="ì œìœ¡">
                <div class="name">ì œìœ¡</div>
                <div class="price">4800ì›</div>
            </div>
            <div class="menu-item" onclick="addToCart('ê¹€ë°¥', 3800)">
                <img src="img/ê¹€ë°¥.jpg" alt="ê¹€ë°¥">
                <div class="name">ê¹€ë°¥</div>
                <div class="price">3800ì›</div>
            </div>
            <div class="menu-item" onclick="addToCart('ì¹˜ì¦ˆê¹€ë°¥', 4000)">
                <img src="img/ê¹€ë°¥.jpg" alt="ì¹˜ì¦ˆê¹€ë°¥">
                <div class="name">ì¹˜ì¦ˆê¹€ë°¥</div>
                <div class="price">4000ì›</div>
            </div>
            <div class="menu-item" onclick="addToCart('ëˆê¹ŒìŠ¤', 5000)">
                <img src="img/ëˆê¹ŒìŠ¤.jpg" alt="ëˆê¹ŒìŠ¤">
                <div class="name">ëˆê¹ŒìŠ¤</div>
                <div class="price">5000ì›</div>
            </div>
        </div>

        <!-- ë©”ë‰´2 -->
        <div class="menu-grid hidden" id="coffee-hot">
            <div class="menu-item">
                <img src="americano.png" alt="ë©”ë‰´1">
                <div class="name">ë©”ë‰´1</div>
                <div class="price">3000ì›</div>
            </div>
            <div class="menu-item">
                <img src="latte.png" alt="ë©”ë‰´1">
                <div class="name">ë©”ë‰´2</div>
                <div class="price">3500ì›</div>
            </div>
            <div class="menu-item">
                <img src="mocha.png" alt="ë©”ë‰´1">
                <div class="name">ë©”ë‰´3</div>
                <div class="price">4000ì›</div>
            </div>
        </div>

        <!-- ë©”ë‰´3 -->
        <div class="menu-grid hidden" id="coffee-ice">
            <div class="menu-item">
                <img src="iced-americano.png" alt="ë©”ë‰´1">
                <div class="name">ë©”ë‰´1</div>
                <div class="price">3500ì›</div>
            </div>
            <div class="menu-item">
                <img src="iced-latte.png" alt="ë©”ë‰´1">
                <div class="name">ë©”ë‰´2</div>
                <div class="price">4000ì›</div>
            </div>
            <div class="menu-item">
                <img src="iced-mocha.png" alt="ë©”ë‰´1">
                <div class="name">ë©”ë‰´3</div>
                <div class="price">4500ì›</div>
            </div>
        </div>
    </main>

    <footer>
        
        <!-- ì£¼ë¬¸ ë‚´ì—­ ë° ë²„íŠ¼ -->
        <div class="order-section">

            <!-- ë‹´ì€ ë¬¼ê±´ í‘œì‹œ ì˜ì—­ -->
            <div class="cart-section">
                <h3>ë‹´ì€ ìƒí’ˆ</h3>
                <ul id="cart-items">
                    <!-- ì£¼ë¬¸ ë‚´ì—­ì´ ì—¬ê¸°ì— ì¶”ê°€ë¨ -->
                </ul>
            </div>

            <!-- ì˜¤ë¥¸ìª½ ë²„íŠ¼ ì˜ì—­ -->
            <div class="button-section">
                <!-- ë‚¨ì€ì‹œê°„ê³¼ ì „ì²´ì‚­ì œ ë²„íŠ¼ -->
                <div class="timer-delete-row">
                    <div class="timer">ë‚¨ì€ì‹œê°„ <br><span class="time">0ì´ˆ</span></div>
                    <button class="btn delete" onclick="clearCart()">ì „ì²´ì‚­ì œ</button>
                </div>

                <!-- ì„ íƒí•œ ìƒí’ˆ ë²„íŠ¼ -->
                <button class="btn select">ì„ íƒí•œ ìƒí’ˆ</button>
                
                <!-- ê²°ì œí•˜ê¸° ë²„íŠ¼ -->
                <button class="btn pay" onclick="calculateTotal()">ê²°ì œí•˜ê¸°</button>
            </div>
        </div>
    </footer>

    <!-- ì£¼ë¬¸ ë‚´ì—­ í™•ì¸ ëª¨ë‹¬ ì°½ -->
    <div class="modal-overlay" id="order-modal">
        <div class="modal">
            <div class="modal-header">ì£¼ë¬¸ë‚´ì—­í™•ì¸</div>
            <div class="modal-main">
                <h2>ì£¼ë¬¸ ì •ë³´ë¥¼ í™•ì¸í•´ ì£¼ì„¸ìš”.</h2>
                <table class="order-table">
                    <thead>
                        <tr>
                            <th>ì£¼ë¬¸ë‚´ì—­</th>
                            <th>ìˆ˜ëŸ‰</th>
                            <th>ê¸ˆì•¡</th>
                        </tr>
                    </thead>
                    <tbody id="order-summary">
                        <!-- ì£¼ë¬¸ ë‚´ì—­ì´ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </tbody>
                </table>
                <div class="summary">
                    <div><span>ì´ ìˆ˜ëŸ‰:</span> <span id="total-quantity">0ê°œ</span></div>
                    <div><span>ì£¼ë¬¸ê¸ˆì•¡:</span> <span id="total-amount">0ì›</span></div>
                    <div><span>í• ì¸ê¸ˆì•¡:</span> <span>0ì›</span></div>
                    <div><span>ê²°ì œí•  ê¸ˆì•¡:</span> <span id="final-amount">0ì›</span></div>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="btn store" onclick="confirmOrder()">ê²°ì œí•˜ê¸°</button>
                <button class="btn takeout" onclick="closeModal()">ì£¼ë¬¸ ì·¨ì†Œ</button>
            </div>
        </div>
    </div>

    <!-- ê²°ì œí•˜ê¸° ëª¨ë‹¬ ì°½ -->
    <div class="modal-overlay" id="payment-modal" style="display: none;">
        <div class="payment-modal">
            <div class="payment-modal-header">ê²°ì œ ë°©ë²•ì„ ì„ íƒí•´ ì£¼ì„¸ìš”</div>
            <div class="payment-total">ì´ ê²°ì œê¸ˆì•¡ | <span id="payment-total-amount">0ì›</span></div>
            
            <div class="payment-options">
                <div class="payment-option pay1" onclick="selectPayment('ì‹ ìš©ì¹´ë“œ')">
                    <span>ì‹ ìš©ì¹´ë“œ</span>
                </div>

                <div class="payment-option" onclick="selectPayment('í˜ì´')">
                    <img src="img/pay.png" alt="í˜ì´">
                    <span>í˜ì´</span>
                </div>

                <div class="payment-option" onclick="selectPayment('ëª¨ë°”ì¼ ì¿ í°')">
                    <img src="img/coupon.png" alt="ëª¨ë°”ì¼ ì¿ í°">
                    <span>ëª¨ë°”ì¼ ì¿ í°</span>
                </div>

                <div class="payment-option" onclick="selectPayment('ë°”ì½”ë“œ í• ì¸')">
                    <img src="img/barcode.png" alt="ë°”ì½”ë“œ í• ì¸">
                    <span>ë°”ì½”ë“œ í• ì¸</span>
                </div>

                <div class="payment-option" onclick="selectPayment('ê¸°í”„íŠ¸ ì¹´ë“œ')">
                    <img src="img/gift-card.png" alt="ê¸°í”„íŠ¸ ì¹´ë“œ">
                    <span>ê¸°í”„íŠ¸ ì¹´ë“œ</span>
                </div>

            </div>
        </div>
    </div>

    <script>

        // ëª¨ë‹¬ì°½ ì—´ê¸°

        function showModal() {
            const modal = document.getElementById('order-modal');
            const orderSummary = document.getElementById('order-summary');
            const totalQuantity = document.getElementById('total-quantity');
            const totalAmount = document.getElementById('total-amount');
            const finalAmount = document.getElementById('final-amount');
            modal.style.display = 'flex';

        
            orderSummary.innerHTML = '';
            let totalQty = 0;
            let totalPrice = 0;

            cartItems.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.name}</td>
                    <td>${item.quantity}</td>
                    <td>${item.price * item.quantity}ì›</td>
                `;
                orderSummary.appendChild(row);
                totalQty += item.quantity;
                totalPrice += item.price * item.quantity;
            });

            totalQuantity.textContent = `${totalQty}ê°œ`;
            totalAmount.textContent = `${totalPrice}ì›`;
            finalAmount.textContent = `${totalPrice}ì›`;
        }

        // ëª¨ë‹¬ ì°½ ë‹«ê¸°
        function closeModal() {
            const modal = document.getElementById('order-modal');
            modal.style.display = 'none';
        }

        // ì£¼ë¬¸ ì™„ë£Œ ì•Œë¦¼ì°½
        function confirmOrder() {
            closeModal(); // Close the order confirmation modal
            showPaymentModal(); // Show the payment method modal
        }

        // ê²°ì œí•˜ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ ì—´ê¸°
        document.querySelector('.btn.pay').addEventListener('click', showModal);

        // Show Payment Modal
        function showPaymentModal() {
            const paymentModal = document.getElementById('payment-modal');
            const paymentTotalAmount = document.getElementById('payment-total-amount');
            const totalAmount = document.getElementById('total-amount').textContent;
            paymentTotalAmount.textContent = totalAmount;
            paymentModal.style.display = 'flex';
        }

        // Close Payment Modal
        function closePaymentModal() {
            const paymentModal = document.getElementById('payment-modal');
            paymentModal.style.display = 'none';
        }

        // Select Payment Method
        function selectPayment(method) {
            alert(`${method} ê²°ì œê°€ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤.`);
            closePaymentModal();
        }
    </script>
</body>
</html>