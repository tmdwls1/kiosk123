<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Easy KIOSK</title>
    <link rel="stylesheet" href="css/restaurant_kio.css">
    <script>
        // ìƒë‹¨ ë©”ë‰´ í´ë¦­ì‹œ ë©”ë‰´ ì „í™˜
        function showTab(tabName) {
            const tabs = document.querySelectorAll('.menu-grid');
            tabs.forEach(tab => tab.classList.add('hidden'));
            document.getElementById(tabName).classList.remove('hidden');

            const tabButtons = document.querySelectorAll('.tab');
            tabButtons.forEach(button => button.classList.remove('active'));
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
        }
        
    </script>
    <script>
        
        // íƒ€ì´ë¨¸ ì„¤ì • 
        let time = 120; // ì´ˆê¸° ì‹œê°„ ì„¤ì •
        function startTimer() {
            const timerElement = document.querySelector('.timer .time');
            const interval = setInterval(() => {
                if (time > 0) {
                    time--; // 1ì´ˆì”© ê°ì†Œ
                    timerElement.textContent = `${time}ì´ˆ`;
                } else {
                    clearInterval(interval); // íƒ€ì´ë¨¸ ì¤‘ì§€
                }
            }, 1000); // 1ì´ˆë§ˆë‹¤ ì‹¤í–‰
        }
        // í˜ì´ì§€ ë¡œë“œ ì‹œ íƒ€ì´ë¨¸ ì‹œì‘
        window.onload = startTimer;
        
    </script>
    <script>
        
        const cartItems = []; // ì£¼ë¬¸ ë‚´ì—­ ì €ì¥

        function addToCart(name, price) {
            const cartList = document.getElementById('cart-items');

            // ì´ë¯¸ ë‹´ì€ ìƒí’ˆì¸ì§€ í™•ì¸
            const existingItem = cartItems.find(item => item.name === name);
            if (existingItem) {
                existingItem.quantity++;
                updateCart();
                return;
            }

            // ìƒˆë¡œìš´ ìƒí’ˆ ì¶”ê°€
            const newItem = { name, price, quantity: 1 };
            cartItems.push(newItem);
            updateCart();
        }

        function updateCart() {
            const cartList = document.getElementById('cart-items');
            cartList.innerHTML = ''; // ê¸°ì¡´ ë‚´ìš© ì´ˆê¸°í™”

            cartItems.forEach((item, index) => {
                const cartItem = document.createElement('li');
                cartItem.className = 'cart-item';

                cartItem.innerHTML = `
                    <button class="remove-btn" onclick="removeItem(${index})">X</button>
                    <span class="item-name">${item.name}</span>
                    <div class="item-controls">
                        <button onclick="decreaseQuantity(${index})">-</button>
                        <span>${item.quantity}ê°œ</span>
                        <button onclick="increaseQuantity(${index})">+</button>
                        <span>${item.price * item.quantity}ì›</span>
                    </div>
                `;

                cartList.appendChild(cartItem);
            });
            calculateTotal(); // ì´ ê¸ˆì•¡ ì—…ë°ì´íŠ¸
        }

        function increaseQuantity(index) {
            cartItems[index].quantity++;
            updateCart();
        }

        function decreaseQuantity(index) {
            if (cartItems[index].quantity > 1) {
                cartItems[index].quantity--;
            } else {
                removeItem(index);
            }
            updateCart();
        }

        function removeItem(index) {
            cartItems.splice(index, 1); // í•´ë‹¹ ìƒí’ˆ ì‚­ì œ
            updateCart();
        }

        function calculateTotal() {
            const total = cartItems.reduce((sum, item) => sum + item.price * item.quantity, 0); // ì´ ê¸ˆì•¡ ê³„ì‚°
            const payButton = document.querySelector('.btn.pay');
            payButton.textContent = `${total}ì› ê²°ì œí•˜ê¸°`; // ë²„íŠ¼ì— ì´ ê¸ˆì•¡ í‘œì‹œ
        }

        function clearCart() {
            cartItems.length = 0; // ë‹´ì€ ìƒí’ˆ ëª©ë¡ ì´ˆê¸°í™”
            updateCart(); // í™”ë©´ ì—…ë°ì´íŠ¸
        }
    </script>
    <style>
        /* Modal styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black */
            display: none; /* Hidden by default */
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            width: 400px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            text-align: center;
        }

        .modal h2 {
            margin-bottom: 20px;
        }

        .modal ul {
            list-style: none;
            padding: 0;
            margin: 0;
            text-align: left;
        }

        .modal ul li {
            margin-bottom: 10px;
        }

        .modal .modal-buttons {
            margin-top: 20px;
            display: flex;
            justify-content: space-between;
        }

        .modal .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .modal .btn.confirm {
            background-color: #4caf50;
            color: white;
        }

        .modal .btn.cancel {
            background-color: #f44336;
            color: white;
        }
    </style>
</head>
<body>
    
    <header>
        <div class="header">
            <div class="icon">ğŸ </div>
            <h1>ìŒì‹ì  í‚¤ì˜¤ìŠ¤í¬</h1>
            <div class="icon">+</div>
        </div>

        <div class="tabs">
            <div class="tab active" data-tab="season-menu" onclick="showTab('season-menu')">ë©”ë‰´1</div>
            <div class="tab" data-tab="coffee-hot" onclick="showTab('coffee-hot')">ë©”ë‰´2</div>
            <div class="tab" data-tab="coffee-ice" onclick="showTab('coffee-ice')">ë©”ë‰´3</div>
        </div>
    </header>    


    <main>
        <!-- ë©”ë‰´1 -->
        <div class="menu-grid" id="season-menu">
            <div class="menu-item" onclick="addToCart('ëœì¥ì°Œê°œ', 4000)">
                <img src="img/ëœì¥ì°Œê°œ.jpg" alt="ëœì¥ì°Œê°œ">
                <div class="name">ëœì¥ì°Œê°œ</div>
                <div class="price">4000ì›</div>
            </div>
            <div class="menu-item" onclick="addToCart('ì œìœ¡', 4800)">
                <img src="img/ì œìœ¡.jpg" alt="ì œìœ¡">
                <div class="name">ì œìœ¡</div>
                <div class="price">4800ì›</div>
            </div>
            <div class="menu-item" onclick="addToCart('ê¹€ë°¥', 3800)">
                <img src="img/ê¹€ë°¥.jpg" alt="ê¹€ë°¥">
                <div class="name">ê¹€ë°¥</div>
                <div class="price">3800ì›</div>
            </div>
            <div class="menu-item" onclick="addToCart('ì¹˜ì¦ˆê¹€ë°¥', 4000)">
                <img src="img/ê¹€ë°¥.jpg" alt="ì¹˜ì¦ˆê¹€ë°¥">
                <div class="name">ì¹˜ì¦ˆê¹€ë°¥</div>
                <div class="price">4000ì›</div>
            </div>
            <div class="menu-item" onclick="addToCart('ëˆê¹ŒìŠ¤', 5000)">
                <img src="img/ëˆê¹ŒìŠ¤.jpg" alt="ëˆê¹ŒìŠ¤">
                <div class="name">ëˆê¹ŒìŠ¤</div>
                <div class="price">5000ì›</div>
            </div>
        </div>

        <!-- ë©”ë‰´2 -->
        <div class="menu-grid hidden" id="coffee-hot">
            <div class="menu-item">
                <img src="americano.png" alt="ë©”ë‰´1">
                <div class="name">ë©”ë‰´1</div>
                <div class="price">3000ì›</div>
            </div>
            <div class="menu-item">
                <img src="latte.png" alt="ë©”ë‰´1">
                <div class="name">ë©”ë‰´2</div>
                <div class="price">3500ì›</div>
            </div>
            <div class="menu-item">
                <img src="mocha.png" alt="ë©”ë‰´1">
                <div class="name">ë©”ë‰´3</div>
                <div class="price">4000ì›</div>
            </div>
        </div>

        <!-- ë©”ë‰´3 -->
        <div class="menu-grid hidden" id="coffee-ice">
            <div class="menu-item">
                <img src="iced-americano.png" alt="ë©”ë‰´1">
                <div class="name">ë©”ë‰´1</div>
                <div class="price">3500ì›</div>
            </div>
            <div class="menu-item">
                <img src="iced-latte.png" alt="ë©”ë‰´1">
                <div class="name">ë©”ë‰´2</div>
                <div class="price">4000ì›</div>
            </div>
            <div class="menu-item">
                <img src="iced-mocha.png" alt="ë©”ë‰´1">
                <div class="name">ë©”ë‰´3</div>
                <div class="price">4500ì›</div>
            </div>
        </div>
    </main>

    <footer>
        <!-- ì£¼ë¬¸ ë‚´ì—­ ë° ë²„íŠ¼ -->
        <div class="order-section">
            <!-- ë‹´ì€ ë¬¼ê±´ í‘œì‹œ ì˜ì—­ -->
            <div class="cart-section">
                <h3>ë‹´ì€ ìƒí’ˆ</h3>
                <ul id="cart-items">
                    <!-- ì£¼ë¬¸ ë‚´ì—­ì´ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤ -->
                </ul>
            </div>

            <!-- ì˜¤ë¥¸ìª½ ë²„íŠ¼ ì˜ì—­ -->
            <div class="button-section">
                <!-- ë‚¨ì€ì‹œê°„ê³¼ ì „ì²´ì‚­ì œ ë²„íŠ¼ -->
                <div class="timer-delete-row">
                    <div class="timer">ë‚¨ì€ì‹œê°„ <br><span class="time">0ì´ˆ</span></div>
                    <button class="btn delete" onclick="clearCart()">ì „ì²´ì‚­ì œ</button>
                </div>
                <!-- ì„ íƒí•œ ìƒí’ˆ ë²„íŠ¼ -->
                <button class="btn select">ì„ íƒí•œ ìƒí’ˆ</button>
                <!-- ê²°ì œí•˜ê¸° ë²„íŠ¼ -->
                <button class="btn pay" onclick="calculateTotal()">ê²°ì œí•˜ê¸°</button>
            </div>
        </div>
    </footer>

    <!-- Modal for order summary -->
    <div class="modal-overlay" id="order-modal">
        <div class="modal">
            <h2>ì£¼ë¬¸ ë‚´ì—­ í™•ì¸</h2>
            <ul id="order-summary">
                <!-- ì£¼ë¬¸ ë‚´ì—­ì´ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </ul>
            <div class="modal-buttons">
                <button class="btn confirm" onclick="confirmOrder()">í™•ì¸</button>
                <button class="btn cancel" onclick="closeModal()">ì·¨ì†Œ</button>
            </div>
        </div>
    </div>

    <script>
        // Show the modal
        function showModal() {
            const modal = document.getElementById('order-modal');
            const orderSummary = document.getElementById('order-summary');
            modal.style.display = 'flex';

            // Populate the order summary
            orderSummary.innerHTML = '';
            cartItems.forEach(item => {
                const listItem = document.createElement('li');
                listItem.textContent = `${item.name} - ${item.quantity}ê°œ - ${item.price * item.quantity}ì›`;
                orderSummary.appendChild(listItem);
            });
        }

        // Close the modal
        function closeModal() {
            const modal = document.getElementById('order-modal');
            modal.style.display = 'none';
        }

        // Confirm the order
        function confirmOrder() {
            alert('ì£¼ë¬¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
            closeModal();
            clearCart(); // Clear the cart after confirming the order
        }

        // Attach the modal to the "ê²°ì œí•˜ê¸°" button
        document.querySelector('.btn.pay').addEventListener('click', showModal);
    </script>
</body>
</html>